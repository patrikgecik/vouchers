<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Voucher Customizer</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-voucher {
            width: 400px;
            height: 566px;
            border: 2px solid #ddd;
            overflow: hidden;
            margin: 20px auto;
        }
        
        .test-voucher iframe {
            width: 100%;
            height: 100%;
            border: none;
            transform: scale(0.57);
            transform-origin: top left;
            width: 175%;
            height: 175%;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .format-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .format-btn {
            padding: 8px 16px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .format-btn.active {
            border-color: #4f46e5;
            background: #4f46e5;
            color: white;
        }
        
        .format-btn:hover {
            border-color: #4f46e5;
        }
        
        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            min-width: 150px;
        }
        
        label {
            font-weight: 600;
            color: #555;
            font-size: 14px;
        }
        
        input, select {
            padding: 6px 10px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #4f46e5;
        }
        
        .color-themes {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .color-theme {
            width: 60px;
            height: 40px;
            border: 3px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }
        
        .color-theme:hover {
            transform: scale(1.05);
        }
        
        .color-theme.active {
            border-color: #333;
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üé® Test Voucher Template Customizer</h1>
        
        <div class="format-buttons">
            <button class="format-btn active" data-format="a4-portrait">üìÑ A4 Portr√©t</button>
            <button class="format-btn" data-format="a4-landscape">üìÑ A4 Krajina</button>
            <button class="format-btn" data-format="card">üí≥ Kreditka</button>
            <button class="format-btn" data-format="postcard">üìÆ Pohƒæadnica</button>
        </div>
        
        <div class="color-themes">
            <div class="color-theme active" data-color="blue" style="background: linear-gradient(135deg, #1e40af, #3b82f6);">Modr√°</div>
            <div class="color-theme" data-color="green" style="background: linear-gradient(135deg, #059669, #10b981);">Zelen√°</div>
            <div class="color-theme" data-color="purple" style="background: linear-gradient(135deg, #7c3aed, #8b5cf6);">Fialov√°</div>
            <div class="color-theme" data-color="gold" style="background: linear-gradient(135deg, #d97706, #f59e0b);">Zlat√°</div>
            <div class="color-theme" data-color="red" style="background: linear-gradient(135deg, #dc2626, #ef4444);">ƒåerven√°</div>
            <div class="color-theme" data-color="teal" style="background: linear-gradient(135deg, #0d9488, #14b8a6);">Tyrkys</div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>N√°zov spoloƒçnosti:</label>
                <input type="text" id="companyName" value="Serenity Spa & Wellness">
            </div>
            <div class="control-group">
                <label>Titulok:</label>
                <input type="text" id="title" value="DARƒåEKOV√Å POUK√Å≈ΩKA">
            </div>
            <div class="control-group">
                <label>Ikona:</label>
                <select id="icon">
                    <option value="üéÅ">üéÅ Darƒçek</option>
                    <option value="üíù">üíù Bal√≠ƒçek</option>
                    <option value="üéâ">üéâ Oslava</option>
                    <option value="üåü">üåü Hviezda</option>
                    <option value="üíé">üíé Diamant</option>
                    <option value="üèÜ">üèÜ Trofej</option>
                </select>
            </div>
            <div class="control-group">
                <label>Layout:</label>
                <select id="layout">
                    <option value="modern">Modern√Ω</option>
                    <option value="classic">Klasick√Ω</option>
                    <option value="elegant">Elegantn√Ω</option>
                    <option value="luxury">Luxusn√Ω</option>
                </select>
            </div>
        </div>
        
        <div class="test-voucher" id="voucherPreview">
            <!-- Voucher template sa zobraz√≠ tu -->
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
            <button onclick="regenerateVoucher()" style="background: #4f46e5; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-weight: 600;">
                üîÑ Regenerova≈• voucher
            </button>
        </div>
    </div>

    <script type="module">
        // Import na≈°ich ≈°abl√≥n (simulujeme import)
        
        // Dostupn√© form√°ty
        const VOUCHER_FORMATS = [
            { id: 'a4-portrait', name: 'A4 na v√Ω≈°ku', width: '210mm', height: '297mm' },
            { id: 'a4-landscape', name: 'A4 na ≈°√≠rku', width: '297mm', height: '210mm' },
            { id: 'card', name: 'Kreditn√° karta', width: '85.6mm', height: '53.98mm' },
            { id: 'postcard', name: 'Pohƒæadnica', width: '148mm', height: '105mm' }
        ];

        // Predvolen√© farby pre r√¥zne ≈°t√Ωly
        const COLOR_THEMES = [
            { id: 'blue', name: 'Modr√°', primary: '#1e40af', secondary: '#3b82f6', accent: '#60a5fa', text: '#1f2937', background: '#f8fafc' },
            { id: 'green', name: 'Zelen√°', primary: '#059669', secondary: '#10b981', accent: '#34d399', text: '#1f2937', background: '#f0fdf4' },
            { id: 'purple', name: 'Fialov√°', primary: '#7c3aed', secondary: '#8b5cf6', accent: '#a78bfa', text: '#1f2937', background: '#faf5ff' },
            { id: 'gold', name: 'Zlat√°', primary: '#d97706', secondary: '#f59e0b', accent: '#fbbf24', text: '#1f2937', background: '#fffbeb' },
            { id: 'red', name: 'ƒåerven√°', primary: '#dc2626', secondary: '#ef4444', accent: '#f87171', text: '#1f2937', background: '#fef2f2' },
            { id: 'teal', name: 'Tyrkysov√°', primary: '#0d9488', secondary: '#14b8a6', accent: '#5eead4', text: '#1f2937', background: '#f0fdfa' }
        ];

        // Template layouts
        const VOUCHER_LAYOUTS = [
            {
                id: 'modern',
                name: 'Modern√Ω',
                description: 'ƒåist√Ω a modern√Ω dizajn',
                htmlTemplate: (config) => `
                    <div style="width: ${config.format.width}; height: ${config.format.height}; margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, ${config.colors.background} 0%, ${hexToRgba(config.colors.accent, 0.1)} 100%); position: relative; overflow: hidden;">
                        ${config.showDecorations ? `<div style="position: absolute; top: 20px; right: 20px; font-size: 80px; opacity: 0.03; color: ${config.colors.primary}; transform: rotate(15deg);">${config.icon}</div>` : ''}
                        
                        <div style="background: white; height: 100%; margin: 15mm; border-radius: 20px; box-shadow: 0 20px 40px ${hexToRgba(config.colors.primary, 0.15)}; overflow: hidden; position: relative;">
                            
                            <div style="background: linear-gradient(135deg, ${config.colors.primary} 0%, ${config.colors.secondary} 100%); color: white; padding: 25mm 20mm 20mm 20mm; text-align: center; position: relative;">
                                <div style="font-size: 48px; margin-bottom: 10px;">${config.icon}</div>
                                <h1 style="margin: 0; font-size: 32px; font-weight: 700; letter-spacing: 1px;">${config.title}</h1>
                                <p style="margin: 8px 0 0 0; font-size: 18px; opacity: 0.95; font-weight: 300;">{{companyName}}</p>
                                
                                ${config.showDecorations ? `<div style="position: absolute; top: 15px; left: 25px; font-size: 20px; opacity: 0.6;">‚ú®</div>` : ''}
                            </div>
                            
                            <div style="padding: 25mm 20mm; text-align: center; position: relative;">
                                <div style="background: linear-gradient(135deg, ${config.colors.background} 0%, ${hexToRgba(config.colors.accent, 0.3)} 100%); border-radius: 15px; padding: 20mm 15mm; margin-bottom: 20mm; border: 2px solid ${config.colors.accent}; position: relative;">
                                    <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: white; padding: 5px 15px; border-radius: 20px; border: 2px solid ${config.colors.secondary}; color: ${config.colors.primary}; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">‚ú® Hodnota</div>
                                    <div style="font-size: 64px; font-weight: 800; color: ${config.colors.primary}; margin: 10px 0; text-shadow: 2px 2px 4px ${hexToRgba(config.colors.primary, 0.1)};">‚Ç¨{{amount}}</div>
                                    <div style="width: 60px; height: 3px; background: linear-gradient(to right, ${config.colors.primary}, ${config.colors.secondary}); margin: 0 auto; border-radius: 2px;"></div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; margin-bottom: 20mm; text-align: left;">
                                    <div style="flex: 1; margin-right: 10mm;">
                                        <div style="background: ${config.colors.background}; padding: 15mm; border-radius: 12px; border-left: 4px solid ${config.colors.secondary};">
                                            <p style="margin: 0 0 8px 0; font-size: 14px; color: ${config.colors.secondary}; text-transform: uppercase; letter-spacing: 1px; font-weight: 600;">üéØ Slu≈æba</p>
                                            <p style="margin: 0; font-size: 20px; font-weight: 700; color: ${config.colors.text}; line-height: 1.3;">{{serviceName}}</p>
                                        </div>
                                    </div>
                                    <div style="flex: 1; margin-left: 10mm;">
                                        <div style="background: ${config.colors.background}; padding: 15mm; border-radius: 12px; border-left: 4px solid ${config.colors.accent};">
                                            <p style="margin: 0 0 8px 0; font-size: 14px; color: ${config.colors.secondary}; text-transform: uppercase; letter-spacing: 1px; font-weight: 600;">üíù Pre</p>
                                            <p style="margin: 0; font-size: 20px; font-weight: 700; color: ${config.colors.text}; line-height: 1.3;">{{customerName}}</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="border-top: 3px dashed ${config.colors.accent}; padding-top: 20mm; display: flex; justify-content: space-between; align-items: center;">
                                    <div style="flex: 1; text-align: left;">
                                        <p style="margin: 0 0 8px 0; font-size: 12px; color: ${config.colors.secondary}; text-transform: uppercase; letter-spacing: 1px; font-weight: 600;">üîë K√≥d pouk√°≈æky</p>
                                        <p style="margin: 0 0 15px 0; font-size: 18px; font-weight: 700; font-family: 'Courier New', monospace; color: ${config.colors.primary}; background: ${config.colors.background}; padding: 8px 12px; border-radius: 6px; display: inline-block;">{{code}}</p>
                                        
                                        <p style="margin: 0 0 8px 0; font-size: 12px; color: ${config.colors.secondary}; text-transform: uppercase; letter-spacing: 1px; font-weight: 600;">üìÖ Platnos≈• do</p>
                                        <p style="margin: 0; font-size: 16px; font-weight: 600; color: #dc2626;">{{expiresAt}}</p>
                                    </div>
                                    
                                    ${config.showQR ? `<div style="flex: 0 0 auto; text-align: center; margin-left: 15mm;">
                                        <div style="width: 80px; height: 80px; background: ${config.colors.background}; border: 2px solid ${config.colors.secondary}; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 8px;">
                                            <div style="font-size: 24px;">üì±</div>
                                        </div>
                                        <p style="margin: 0; font-size: 10px; color: ${config.colors.secondary}; text-align: center; line-height: 1.3;">Naskenuj<br>QR k√≥d</p>
                                    </div>` : ''}
                                </div>
                            </div>
                            
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 8px; background: linear-gradient(to right, ${config.colors.primary}, ${config.colors.secondary}, ${config.colors.accent}, ${config.colors.secondary}, ${config.colors.primary});"></div>
                        </div>
                    </div>
                `
            }
        ];

        // Helper function
        function hexToRgba(hex, alpha = 1) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            if (!result) return hex;
            
            const r = parseInt(result[1], 16);
            const g = parseInt(result[2], 16);
            const b = parseInt(result[3], 16);
            
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        // Generate custom template
        function generateCustomTemplate(config) {
            const layout = VOUCHER_LAYOUTS.find(l => l.id === config.layoutId) || VOUCHER_LAYOUTS[0];
            const format = VOUCHER_FORMATS.find(f => f.id === config.formatId) || VOUCHER_FORMATS[0];
            const colors = COLOR_THEMES.find(c => c.id === config.colorThemeId) || COLOR_THEMES[0];
            
            return layout.htmlTemplate({
                format: format,
                colors: colors,
                logo: config.logo,
                icon: config.icon || 'üéÅ',
                title: config.title || 'DARƒåEKOV√Å POUK√Å≈ΩKA',
                companyName: config.companyName,
                footerInfo: config.footerInfo,
                showDecorations: config.showDecorations !== false,
                showQR: config.showQR !== false,
                font: config.font || 'Segoe UI'
            });
        }

        // Current config
        let currentConfig = {
            formatId: 'a4-portrait',
            colorThemeId: 'blue', 
            layoutId: 'modern',
            companyName: 'Serenity Spa & Wellness',
            title: 'DARƒåEKOV√Å POUK√Å≈ΩKA',
            icon: 'üéÅ',
            showDecorations: true,
            showQR: true,
            footerInfo: 'Hlavn√° 123, Bratislava | +421 912 345 678'
        };

        // Update voucher
        function updateVoucher() {
            const template = generateCustomTemplate(currentConfig);
            
            // Sample data
            const voucherData = {
                companyName: currentConfig.companyName,
                amount: '125.00',
                customerName: 'Anna Nov√°kov√°',
                serviceName: 'Relaxaƒçn√° mas√°≈æ',
                code: 'VC-12345678',
                expiresAt: '31.12.2025'
            };

            // Replace placeholders
            let htmlContent = template;
            Object.keys(voucherData).forEach(key => {
                const regex = new RegExp(`\\{\\{${key}\\}\\}`, 'g');
                htmlContent = htmlContent.replace(regex, voucherData[key] || '');
            });

            // Display in iframe
            const iframe = document.createElement('iframe');
            iframe.style.width = '100%';
            iframe.style.height = '100%';
            iframe.style.border = 'none';
            iframe.style.transform = 'scale(0.57)';
            iframe.style.transformOrigin = 'top left';
            iframe.style.width = '175%';
            iframe.style.height = '175%';
            
            iframe.srcdoc = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <style>
                        body { margin: 0; padding: 0; }
                    </style>
                </head>
                <body>${htmlContent}</body>
                </html>
            `;

            const preview = document.getElementById('voucherPreview');
            preview.innerHTML = '';
            preview.appendChild(iframe);
        }

        // Event listeners
        document.querySelectorAll('.format-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelector('.format-btn.active').classList.remove('active');
                this.classList.add('active');
                currentConfig.formatId = this.dataset.format;
                updateVoucher();
            });
        });

        document.querySelectorAll('.color-theme').forEach(theme => {
            theme.addEventListener('click', function() {
                document.querySelector('.color-theme.active').classList.remove('active');
                this.classList.add('active');
                currentConfig.colorThemeId = this.dataset.color;
                updateVoucher();
            });
        });

        document.getElementById('companyName').addEventListener('input', function() {
            currentConfig.companyName = this.value;
            updateVoucher();
        });

        document.getElementById('title').addEventListener('input', function() {
            currentConfig.title = this.value;
            updateVoucher();
        });

        document.getElementById('icon').addEventListener('change', function() {
            currentConfig.icon = this.value;
            updateVoucher();
        });

        document.getElementById('layout').addEventListener('change', function() {
            currentConfig.layoutId = this.value;
            updateVoucher();
        });

        // Global regenerate function
        window.regenerateVoucher = updateVoucher;

        // Initial load
        updateVoucher();
    </script>
</body>
</html>